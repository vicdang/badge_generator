# ğŸ“Š Architecture Diagrams & Workflows

## 1ï¸âƒ£ System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      BADGE GENERATOR SYSTEM                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  INPUT LAYER                                                â”‚   â”‚
â”‚  â”‚  â€¢ Employee List (Filename)                                 â”‚   â”‚
â”‚  â”‚  â€¢ Configuration (config.ini)                               â”‚   â”‚
â”‚  â”‚  â€¢ Template Image                                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                           â†“                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  IMAGE MANAGER LAYER (NEW)                                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Check local file existence                         â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Parse Employee ID from filename                    â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Detect missing images                              â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚                                                             â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚ IMAGE DOWNLOADER (Multi-threaded)                   â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Build download URLs                                â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Parallel downloads (5-10 workers)                  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Error handling & retry                             â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Download statistics                                â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                           â†“                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  IMAGE PROCESSING LAYER                                     â”‚   â”‚
â”‚  â”‚  (ImageMaker class - existing)                              â”‚   â”‚
â”‚  â”‚  â€¢ Face detection (Haar Cascade)                            â”‚   â”‚
â”‚  â”‚  â€¢ Image manipulation                                       â”‚   â”‚
â”‚  â”‚  â€¢ Text rendering                                           â”‚   â”‚
â”‚  â”‚  â€¢ QR code generation                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                           â†“                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  OUTPUT LAYER                                               â”‚   â”‚
â”‚  â”‚  â€¢ Generated Badges (des_img/)                              â”‚   â”‚
â”‚  â”‚  â€¢ Processing Log & Statistics                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2ï¸âƒ£ Image Manager Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ImageManager.init()       â”‚
â”‚   (src_path, base_url)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ Validate paths &   â”‚
      â”‚ Initialize queue   â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ get_missing_images()       â”‚
  â”‚ for each filename:         â”‚
  â”‚  â””â”€ file_exists()?         â”‚
  â”‚     â”œâ”€ Yes: skip           â”‚
  â”‚     â””â”€ No:  add to missing â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ download_missing_images()  â”‚
  â”‚ (multi-threaded)           â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Start N worker threads     â”‚
  â”‚ (N = workers count)        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ _worker_thread():          â”‚
  â”‚  while queue not empty:    â”‚
  â”‚   â”œâ”€ Get (file, emp_id)   â”‚
  â”‚   â”œâ”€ Build URL            â”‚
  â”‚   â”œâ”€ Download            â”‚
  â”‚   â”œâ”€ Handle errors        â”‚
  â”‚   â””â”€ Update stats         â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Return download_stats:     â”‚
  â”‚ {total, missing, down-     â”‚
  â”‚  loaded, failed, skipped}  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3ï¸âƒ£ Multi-threaded Download Process

```
Main Thread                 Worker Thread 1         Worker Thread 2    ...
    â”‚                              â”‚                        â”‚
    â”œâ”€ Create queue                â”‚                        â”‚
    â”‚                              â”‚                        â”‚
    â”œâ”€ Start workers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€
    â”‚                              â”‚                        â”‚
    â”œâ”€ Queue tasks â”€â”              â”‚                        â”‚
    â”‚               â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€
    â”‚                      â†“       â”‚            â†“           â”‚
    â”‚                   Queue: (f1, id1)   Queue: (f2, id2) ...
    â”‚                      â†“       â”‚            â†“           â”‚
    â”‚                            Get item    Get item
    â”‚                            from queue  from queue
    â”‚                              â”‚            â”‚
    â”‚                      â”œâ”€ Build URL  â”œâ”€ Build URL
    â”‚                      â”‚             â”‚
    â”‚                      â”œâ”€ Download   â”œâ”€ Download (parallel)
    â”‚                      â”‚             â”‚
    â”‚                      â””â”€ Update     â””â”€ Update stats
    â”‚                        stats
    â”‚
    â”œâ”€ Wait for queue.join()
    â”‚  (all tasks done)
    â”‚
    â”œâ”€ Send stop signal (None)
    â”‚
    â””â”€ Join threads
       â†“
    All downloads complete
    â†“
    Return statistics
```

---

## 4ï¸âƒ£ Filename Parsing Logic

```
Input: "john_001_SE_1.png"
        â”‚      â”‚    â”‚  â”‚   â”‚
        â”‚      â”‚    â”‚  â”‚   â””â”€ File extension
        â”‚      â”‚    â”‚  â””â”€ Batch number
        â”‚      â”‚    â””â”€ Position code
        â”‚      â””â”€ Employee ID
        â””â”€ Username

    â†“

Parse by '_' delimiter:
[0]: "john"     â†’ Username
[1]: "001"      â†’ Employee ID (emp_id)
[2]: "SE"       â†’ Position
[3]: "1"        â†’ Batch number

    â†“

Extract emp_id: "001"
Remove prefix (T/B if exists):
"T123" â†’ "123"
"B456" â†’ "456"
"001"  â†’ "001"

    â†“

Build URL:
base_url = "https://intranet.company.com/images/big"
emp_id = "001"
url = "https://intranet.company.com/images/big/1.jpg"
      (note: convert to int removes leading zeros)

    â†“

Download to: "./img/src_img/john_001_SE_1.png"
```

---

## 5ï¸âƒ£ Error Handling Flow

```
Download attempt
       â†“
Try: urllib.request.urlretrieve()
       â”‚
       â”œâ”€ Success?
       â”‚  â”œâ”€ Yes â†’ Log success â†’ stats['downloaded'] += 1
       â”‚  â”‚
       â”‚  â””â”€ No â†’ Handle exception
       â”‚          â†“
       â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚    â”‚ Exception Type?         â”‚
       â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚    â”‚ URLError (network)      â”‚
       â”‚    â”‚  â†’ Log "URL error"      â”‚
       â”‚    â”‚                         â”‚
       â”‚    â”‚ HTTPError (404/403)     â”‚
       â”‚    â”‚  â†’ Log "HTTP {code}"    â”‚
       â”‚    â”‚                         â”‚
       â”‚    â”‚ Timeout                 â”‚
       â”‚    â”‚  â†’ Log "timeout"        â”‚
       â”‚    â”‚                         â”‚
       â”‚    â”‚ Other Exception         â”‚
       â”‚    â”‚  â†’ Log "Failed"         â”‚
       â”‚    â”‚                         â”‚
       â”‚    â””â”€ Add to failed_files â”€â”€â”€â”€â”˜
       â”‚       stats['failed'] += 1
       â”‚
       â””â”€ Continue next file
```

---

## 6ï¸âƒ£ Full Badge Generation Workflow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ INPUT: Employee List                                     â”‚
â”‚ Files: john_001_SE_1.png, jane_002_TL_1.jpg, ...        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ ImageManager Check   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â†“                              â†“
Missing Files             Available Files
   30%                          70%
    â†“                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Auto-download    â”‚        â”‚ Skip        â”‚
â”‚ from web         â”‚        â”‚ (no action) â”‚
â”‚ (multi-thread)   â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
    All files now available locally
           â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ For each image file:  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ImageMaker.execute()            â”‚
   â”‚ â”œâ”€ Load image                   â”‚
   â”‚ â”œâ”€ Correct EXIF orientation     â”‚
   â”‚ â”œâ”€ Resize (maintain aspect)     â”‚
   â”‚ â”œâ”€ Detect face                  â”‚
   â”‚ â”œâ”€ Crop around face             â”‚
   â”‚ â”œâ”€ Parse user info              â”‚
   â”‚ â”œâ”€ Create badge template        â”‚
   â”‚ â”œâ”€ Paste avatar                 â”‚
   â”‚ â”œâ”€ Render text (name, pos, id)  â”‚
   â”‚ â”œâ”€ Generate QR code             â”‚
   â”‚ â”œâ”€ Composite badge              â”‚
   â”‚ â””â”€ Save output                  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ des_img/badge.png     â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7ï¸âƒ£ Configuration & Execution

```
config.ini
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [general]                  â”‚
â”‚ srcpath = img/src_img/      â”‚
â”‚ despath = img/des_img/      â”‚
â”‚ tmppath = img/tmp_img/      â”‚
â”‚                            â”‚
â”‚ [template]                 â”‚
â”‚ width = 650                â”‚
â”‚ height = 1004              â”‚
â”‚                            â”‚
â”‚ [crawler] â† NEW            â”‚
â”‚ base_url = https://...     â”‚
â”‚ workers = 5                â”‚
â”‚ timeout = 30               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
    CLI Argument
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ python execute.py      â”‚
    â”‚ --enable-crawler       â”‚
    â”‚ -d -v exec             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ main(args, config)     â”‚
    â”‚                        â”‚
    â”‚ if --enable-crawler:   â”‚
    â”‚  â”œâ”€ Create ImageManagerâ”‚
    â”‚  â”œâ”€ Download missing   â”‚
    â”‚  â””â”€ Log statistics     â”‚
    â”‚                        â”‚
    â”‚ Process all images     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8ï¸âƒ£ Performance Comparison

```
Scenario A: All images missing (100 files)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Sequential Download                          â”‚
â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 45s     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5 Workers (Parallel)                         â”‚
â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 12s                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 10 Workers (Fast)                            â”‚
â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 8s                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Scenario B: All images available (100 files)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Quick Path (skip download)                   â”‚
â”‚ â–ˆâ–ˆ 0.1s                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 9ï¸âƒ£ Thread Safety & Queuing

```
Main Thread              Queue                Workers (T1, T2, T3, ...)
    â”‚                    â”‚                           â”‚
    â”œâ”€ put(file1) â”€â”€â”€â”€â”€â”€â”€â”¤ file1
    â”‚                    â”‚
    â”œâ”€ put(file2) â”€â”€â”€â”€â”€â”€â”€â”¤ file1
    â”‚                    â”‚ file2
    â”œâ”€ put(file3) â”€â”€â”€â”€â”€â”€â”€â”¤ file1
    â”‚                    â”‚ file2  â† get() T1
    â”‚                    â”‚ file3
    â”‚                    â”‚
    â”œâ”€ put(file4) â”€â”€â”€â”€â”€â”€â”€â”¤ file2  â† get() T2
    â”‚                    â”‚ file3
    â”‚                    â”‚ file4
    â”‚                    â”‚
    â”‚                    â”‚ file3  â† get() T3
    â”‚                    â”‚ file4
    â”‚
    â”œâ”€ Wait for all done (queue.join())
    â”‚
    â””â”€ Send stop signal (None) x3
```

---

## ğŸ”Ÿ Data Flow Summary

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Employee IDs â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ File Existence Check             â”‚
        â”‚ â”œâ”€ Local cache check             â”‚
        â”‚ â””â”€ Return: missing_files list    â”‚
        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ URL Building                     â”‚
        â”‚ â”œâ”€ Parse emp_id from filename    â”‚
        â”‚ â”œâ”€ Build: base_url/emp_id.jpg    â”‚
        â”‚ â””â”€ Return: URL list              â”‚
        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Multi-threaded Downloading       â”‚
        â”‚ â”œâ”€ N worker threads              â”‚
        â”‚ â”œâ”€ Parallel downloads            â”‚
        â”‚ â””â”€ Return: stats, failed list    â”‚
        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Image Processing                 â”‚
        â”‚ â”œâ”€ Face detection                â”‚
        â”‚ â”œâ”€ Badge generation              â”‚
        â”‚ â””â”€ Output: badges                â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Legend:**
- â”Œâ”€â” = Box/Container
- â”œâ”€ = Branch/Connection
- â†“  = Flow downward
- â†’  = Flow rightward
- Ã—  = Action/Operation

---
